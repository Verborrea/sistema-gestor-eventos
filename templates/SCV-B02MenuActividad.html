{% extends "Layout.html" %}
<html>
{% block body %}

<h1>Datos de la actividad</h1>
<a href="{{url_for('evento',idEvento = idEvento)}}"> << Regresar a evento </a>
<br>
<div id="modalAmbienteContainer"></div>
<div class="container marquito">
    <br>
    <form action="{{url_for('modificarActividad',id = actividad.id)}}" method="post">
        <fieldset id="fieldset" {% if estado == 'Borrador' or estado == 'Inscripciones' %} "" {% else %} disabled {% endif %}>
            <div class="form-row">
                <div class="col-4">
                    <div class="form-group">
                        <label for="nombreActividad">Nombre de la actividad</label>
                        <input type="text" class="form-control" id="nombreActividad" name="nombreActividad" value="{{actividad.nombreActividad}}">
                    </div>
                    <div class="form-group">
                        <label for="descripcionActividad">Breve descripcion</label>
                        <input type="text" class="form-control" id="descripcionActividad" name="descripcionActividad" value="{{actividad.descripcion}}">
                    </div>
                    <div class="form-group">
                        <label for="consideracionesAsistentes">Consideraciones para asistentes</label>
                        <input type="text" class="form-control" id="consideracionesAsistentes" name="consideracionesAsistentes"  value="{{actividad.consideraciones}}">
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <label for="tipoActividad">Tipo de actividad</label>
                        <input type="text" class="form-control" id="tipoActividad" name="tipoActividad" value="{{actividad.tipoActividad}}">
                    </div>
                    
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="fechaInicio">Fecha inicio</label>
                                <input type="date" class="form-control" id="fechaInicio" name="fechaInicio" value="{{actividad.fechaInicio}}">
                            </div>
                            
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label for="fechaFin">Fecha Fin</label>
                            <input type="date" class="form-control" id="fechaFin" name="fechaFin" value="{{actividad.fechaFin}}">
                            </div>
                        </div>

                    </div>
                </div>
                <div class=" col-4">
                    <div class="form-group">
                        <label for="expositor">Expositor</label>
                        <input type="text" class="form-control" id="expositor" name="expositor" value="{{actividad.expositor}}">
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="horaInicio">Hora inicio</label>
                                <input type="time" class="form-control" id="horaInicio" name="horaInicio" value="{{actividad.horaInicio}}">
                            </div>
                            
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label for="horaFin">Hora Fin</label>
                            <input type="time" class="form-control" id="horaFin" name="horaFin" value="{{actividad.horaFin}}">
                            </div>
                        </div>

                    </div>
                    {% if estado == 'Borrador' or estado == 'Inscripciones' %}
                    <div class="form-group">
                        <br>
                        <button class="btn btn-success btn-lg btn-block" type="submit">Guardar Cambios</button>
                    </div>
                    {% endif %}
                </div>
            </div>
        </fieldset>

    </form>
    
</div>
<div class="row">
    <div class="col">
        <div id="ambientes" class="container marquito">
            <br>
            <h3>Ambientes</h3>
            <div class="row">
                <div class="col-1"></div>
                <div id="activities-list" class="col">
                    {%for i in range(0, lenAmbientes)%}
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col"> {{ambientes[i].nombre}}</div>
                                <div class="col-2 text-right">
                                    {% if estado == 'Borrador' %}
                                    <a href=""><i class="fa fa-pencil"> </i></a>
                                    <a href="{{url_for('eliminarAmbiente',id = ambientes[i].id)}}"><i class="fa fa-trash"> </i></a>
                                    {% else %}
                                    <a href=""><i class="fa fa-eye"> </i></a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    {%endfor%}

                    <p class="text-center">
                        <button id="crearAmbienteButton" type="button" class="btn btn-outline-primary"> <i class="fa fa-plus"></i> Agregar ambiente</button>
                    </p>

                </div>
                <div class="col-1"></div>
            </div>
        </div>

    </div>
    <div class="col">
        <div id="materiales" class="container marquito">
            <br>
            <h3>Materiales</h3>
            
            <div class="row">
                <div class="col-1"></div>
                <div id="materials-list" class="col">
                    {% for i in range(0, lenMateriales) %}
                    <div class="card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col"> {{materiales[i].nombre}}</div>
                                <div class="col-2 text-right">
                                    <a href=""><i class="fa fa-pencil"> </i></a>
                                    <a href="{{url_for('eliminarMaterial',id = materiales[i].id)}}"><i class="fa fa-trash"> </i></a> 
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    {%endfor%}

                    <p class="text-center">
                        <button type="button" class="btn btn-outline-primary"> <i class="fa fa-plus"></i> Agregar material</button>
                    </p>

                </div>
                <div class="col-1"></div>
            </div>
        </div>

    </div>
</div>

{% endblock %}
{% block script %}
    <script>
        function generarModalAmbiente(){
            //id,titulo, datosForm
            let id = "ambienteModal"
            let titulo = "Ambiente"
            let datosForm = [
                {"nombre":"idAmbiente","tipo_dato":"text","extra":String.raw`style="display: none;" disabled`},
                {"nombre":"nombreAmbiente","tipo_dato":"text"},
                {"nombre":"tipoAmbiente","tipo_dato":"text"},
                {"nombre":"descripcionBreve","tipo_dato":"text"},
                {"nombre":"aforo","tipo_dato":"number"},
            ]
            let formModal = BOOSTTRAP.GenerateComplex.buildFormModal(id,titulo,datosForm)
            BOOSTTRAP.Utilities.onlyChild("modalAmbienteContainer",formModal)//Agrega el modal al doc
            BOOSTTRAP.Utilities.convertToCallModal("crearAmbienteButton",id)
        }
        
        function setModalAmbienteModificar(){
            let idModalAmbiente = "ambienteModal-form"
            BOOSTTRAP.Utilities.setTitle("ambienteModal","Modificar Ambiente")
            BOOSTTRAP.Forms.setActionMethod(idModalAmbiente,"{{url_for('modificarAmbiente')}}")
            BOOSTTRAP.Forms.resetForm(idModalAmbiente)
            //BOOSTTRAP.Forms.setButtonText(idModalAmbiente,"Guardar Cambios") //No es necesario porque texto es continuar
            //BOOSTTRAP.Forms.fillForm()//To-do
        }
        function setModalAmbienteCrear(){
            console.log("llamo")
            let idModalAmbiente = "ambienteModal-form"
            BOOSTTRAP.Utilities.setTitle("ambienteModal","Crear nuevo Ambiente")
            BOOSTTRAP.Forms.setActionMethod(idModalAmbiente,"{{url_for('crearAmbiente')}}")
            BOOSTTRAP.Forms.resetForm(idModalAmbiente)
            $(idModalAmbiente).modal('show')
            
            //BOOSTTRAP.Forms.setButtonText(idModalAmbiente,"Guardar Cambios") //No es necesario porque texto es continuar
        }
        window.onload = ()=>{
            //Generar modal para ambiente
           
            generarModalAmbiente()
            document.getElementById("crearAmbienteButton").addEventListener('click',setModalAmbienteCrear)
        }


    </script>
{% endblock %}
</html>