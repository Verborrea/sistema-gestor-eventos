{% extends "Layout.html" %}
<html>
{% block body %}
<body>
    <div class="container">
        <div class="row">
            <div class="col-8">
                <img src="{{ url_for('static', filename='img/signUp.png') }}" alt="" style="height:80vh">
            </div>
            <div class="col-4 card">
                <div class="card-body">
                    <form  action="/create-user" method="post">
                        <div class="form-group">
                            <label for="nombreUsuario">Nombre de Usuario</label>
                            <input type="text" class="form-control" id="nombreUsuario" name="usuario" required>
                        </div>
                        <div class="form-group">
                            <label for="contraseniaRegistro">Contraseña</label>
                            <input type="password" class="form-control" id="contraseniaRegistro" name="contra" required>
                            <small id="warningContrasenia" class="form-text text-muted">Tu contraseña debe tener entre 4 y 12 caracteres </small>
                        </div>
                        <div class="form-group">
                            <label for="nombresApellidos">Nombres y Apellidos</label>
                            <input type="text" class="form-control" id="consideracionesAsistentes" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label for="nombresApellidos">E-mail</label>
                            <input type="email" class="form-control" id="" name="correo" required>
                        </div>
                        <div>
                            Seleccione tipo de documento
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="tipo_doc" id="dniReg" value="option1" checked required>
                                <label class="form-check-label" for="dniReg"> DNI </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="tipo_doc" id="carnetAlumnoReg" value="option2" required>
                                <label class="form-check-label" for="carnetAlumnoReg"> Carnet de Alumno </label>
                            </div>
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="numeroDocumento">Número de documento</label>
                            <input type="text" class="form-control" id="numeroDocumento" name="doc" required>
                        </div>
                        <div class="form-group">
                            <label for="inputState">Profesión</label>
                            <select id="inputState" class="form-control" name="profesion" required>
                                <option value="none" selected>None</option>
                                {% for i in range(lenProfesion)%}
                                <option value="{{ profesion[i].value }}">{{ profesion[i].texto }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="row">
                            <div class="form-group col-sm">
                                <label for="inputCategoria">Categoria</label>
                                <select id="inputCategoria" class="form-control" name="categoria" onchange="getPaquetes(this.value)" required>
                                    <option value="null"> ... </option>
                                    {% for i in range(len.Categoria)%}
                                    <option value="{{ categoria[i].id }}">{{ categoria[i].texto }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group col-sm">
                                <label for="inputPaquete">Paquete</label>
                                <select id="inputPaquete" class="form-control" name="paquete" required>
                                    <option value="none" selected>Seleccione una categoria primero</option>
                                    
                                </select>
                            </div>
                        </div>
                        

                        <div class="row">
                            <button type="reset" class="btn btn-outline-primary col-4">Cancelar</button>
                            <div class="col-4"></div>
                            <button type="submit" class="btn btn-primary col-4">Registrarse</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-8">
            </div>
        </div>
    </div>
</body>
{% endblock %}
{% block script %}
<script>
    let idCategoria = "inputCategoria"
    let idPaquete = "inputPaquete"
    let idTablaBody = "tbody"
    function getPaquetes(idCat){
        const request = new XMLHttpRequest();
        request.open('GET',  "/obtenerCategoriasPaquete/", false);
        request.onload = () => {
            BOOSTTRAP.Utilities.onlyChild(idPaquete," ")
            const data = JSON.parse(request.responseText);
            let paquete = data.paquete
            let optionsHtml = ""
            for (let i in paquete){
                optionsHtml+=String.raw`<option value="${paquete[i].id}">${paquete[i].nombre}</option>`
            }
            BOOSTTRAP.Utilities.onlyChild(idPaquete,optionsHtml)
        };
        request.send(idCat=idCat)
    }

</script>


<script type="text/javascript">
    let alerta = {{msg_alerta|tojson}}
    if (alerta.existe){
        alert(alerta.mensaje);
    }
 </script>
{% endblock %}
</html>